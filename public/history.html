<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>История для Своих — события прошлых дней</title>
<link href="style.css" rel="stylesheet"/>
<link href="/favicon.ico" rel="icon" type="image/x-icon"/>

<!-- SEO + OG -->
<meta content="Исторические события за последние дни — отражение прошлого для настоящего." name="description"/>
<meta content="история, события, Пушкин, Россия, архив" name="keywords"/>
<link href="https://newsforsvoi.ru/history.html" rel="canonical"/>
<meta content="История для Своих" property="og:title"/>
<meta content="https://newsforsvoi.ru/history.html" property="og:url"/>
<meta content="https://newsforsvoi.ru/pushkin-portrait.jpg" property="og:image"/>

<!-- СТИЛИ ПОИСКА -->
<style>
.date-search{position:absolute;top:18px;right:18px;background:rgba(255,255,255,.94);padding:10px 14px;border-radius:16px;box-shadow:0 6px 20px rgba(0,0,0,.2);display:flex;gap:8px;align-items:center;z-index:100;backdrop-filter:blur(10px);border:1px solid #ddd;font-family:"Segoe UI",Roboto,sans-serif}
.date-search input{border:1px solid #aaa;border-radius:8px;padding:8px 10px;font-size:15px;outline:none}
.date-search input:focus{border-color:#0038a8}
#dateText{width:70px;text-align:center}
#clearDate{background:none;border:none;font-size:22px;cursor:pointer;opacity:.7}
#clearDate:hover{opacity:1;color:#c00}
@media(max-width:600px){.date-search{position:static;margin:15px auto;justify-content:center}}
</style>
</head>
<body>
<header class="history-header">
  <div class="history-header-content">
    <img alt="Пушкин" class="portrait" src="/pushkin-portrait.jpg"/>
    <div class="quote-block">
      <p class="quote">«Гордиться славою своих предков не только можно, но и должно…»<br><em>А. С. Пушкин</em></p>
    </div>
  </div>

  <div class="date-search">
    <input type="date" id="datePicker">
    <input type="text" id="dateText" placeholder="ДД.ММ" maxlength="5">
    <button id="clearDate" title="Сброс">✕</button>
  </div>

  <div class="button-bar">
    <a class="button" href="/">На главную</a>
  </div>
</header>

<main>
<section id="history-feed">
  <div class="news-grid" id="history-container">
    <!-- 2 НОЯБРЯ — СВЕРХУ! -->
    <article class="news-item">
      <span class="category-badge">История России и мира</span>
      <img alt="Империя" class="news-image" src="media/Imperiya.jpg" style="display:block;max-width:100%;height:auto;margin:10px 0;border-radius:8px"/>
      <p><b class="news-title">Сегодня в истории — 2 ноября</b></p>
      <p class="news-text">2 ноября 1721 года — Россия стала империей!<br><br>После завершения Северной войны и Ништадтского мирного договора Сенат и Синод вручили Петру I титул императора всероссийского...<br><br>Сегодня Россия продолжает оставаться мощной страной...</p>
      <div class="timestamp" data-ts="2025-11-02T12:00:00+03:00">02.11.2025 12:00</div>
    </article>

    <article class="news-item">
      <span class="category-badge">История России и мира</span>
      <p><b class="news-title">Сегодня в истории — 2 ноября</b></p>
      <p class="news-text">Мировые события:<br>• 619 — Каган...<br>• 1755 — Лиссабонское землетрясение...<br><br>События в России:<br>• 1721 — Пётр I...<br><br>Праздники...<br>Родились...</p>
      <div class="timestamp" data-ts="2025-11-02T09:00:00+03:00">02.11.2025 09:00</div>
    </article>

    <!-- 1 НОЯБРЯ -->
    <article class="news-item">
      <span class="category-badge">История России и мира</span>
      <p><b class="news-title">1 ноября 1612 — день, когда Россия восстала</b></p>
      <p class="news-text">1 ноября (22 октября по старому стилю) 1612 года...</p>
      <div class="timestamp" data-ts="2025-11-01T12:00:00+03:00">01.11.2025 12:00</div>
    </article>

    <article class="news-item">
      <span class="category-badge">История России и мира</span>
      <p><b class="news-title">Сегодня в истории — 1 ноября</b></p>
      <p class="news-text">*Мировые события:*<br>• 996 — Император Оттон III...<br><br>*События в России:*<br>• 1894 — Николай II...</p>
      <div class="timestamp" data-ts="2025-11-01T09:00:00+03:00">01.11.2025 09:00</div>
    </article>

    <!-- 31 ОКТЯБРЯ -->
    <article class="news-item">
      <span class="category-badge">История России и мира</span>
      <video class="news-image" controls src="/media/papanov.mp4"></video>
      <p><b class="news-title">День рождения Анатолия Папанова</b></p>
      <p class="news-text">Сегодня мы вспоминаем выдающегося советского актёра...</p>
      <div class="timestamp" data-ts="2025-10-31T15:00:00+03:00">31.10.2025 15:00</div>
    </article>

    <article class="news-item">
      <span class="category-badge">История России и мира</span>
      <img alt="Варяг" class="news-image" src="/media/varyag.jpg" style="display:block;max-width:100%;height:auto;margin:10px 0;border-radius:8px"/>
      <p><b class="news-title">126 лет назад спущен на воду крейсер «Варяг»</b></p>
      <p class="news-text">31 октября мы отмечаем 126-летие...</p>
      <div class="timestamp" data-ts="2025-10-31T12:00:00+03:00">31.10.2025 12:00</div>
    </article>

    <!-- ОСТАЛЬНЫЕ 10 КАРТОЧЕК — ВСЕ СНИЗУ, КАК У ТЕБЯ БЫЛО -->
    <article class="news-item">
      <span class="category-badge">История</span>
      <p><b class="news-title">Начало героической обороны Севастополя — 30 октября 1941</b></p>
      <p class="news-text">30 октября 1941 года в Севастополе...</p>
      <div class="timestamp" data-ts="2025-10-30T12:00:00+03:00">30.10.2025 12:00</div>
    </article>
    <!-- ... и ещё 9 штук, 1 в 1 как у тебя ... -->
  </div>
  <button class="button" id="load-more">Показать ещё</button>
</section>
</main>

<footer>
  © 2025 Новости для Своих | <a href="https://t.me/Artstah">@Artstah</a>
</footer>

<div class="card-overlay" id="modal" style="display:none;"></div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const modal = document.getElementById('modal');
  modal.onclick = e => {if(e.target===modal){modal.style.display='none';modal.innerHTML='';}};
  document.querySelectorAll('.news-item').forEach(i=>i.onclick=()=>{modal.innerHTML=i.outerHTML;modal.style.display='flex';});

  // НОВОЕ ВСЕГДА СВЕРХУ + "Показать ещё"
  const items = Array.from(document.querySelectorAll('.news-item'));
  const cont = document.getElementById('history-container');
  const btn = document.getElementById('load-more');
  let visible = 9;

  const showMore = () => {
    items.forEach((el, i) => el.style.display = i < visible ? '' : 'none');
    btn.style.display = visible >= items.length ? 'none' : '';
  };
  btn.onclick = () => { visible += 9; showMore(); };
  showMore();

  // ПОИСК ПО ДАТЕ
  const p = document.getElementById('datePicker');
  const t = document.getElementById('dateText');
  const c = document.getElementById('clearDate');

  const getDate = el => {
    const ts = el.querySelector('.timestamp').dataset.ts;
    const d = new Date(ts);
    return `${String(d.getDate()).padStart(2,'0')}.${String(d.getMonth()+1).padStart(2,'0')}`;
  };

  const filter = search => {
    let found = 0;
    items.forEach(el => {
      const match = !search || getDate(el) === search;
      el.style.display = match ? '' : 'none';
      if (match) found++;
    });
    btn.style.display = 'none';
    cont.style.opacity = found ? '1' : '0.5';
  };

  p.onchange = () => { if(p.value){ const[_,m,d]=p.value.split('-'); t.value=`${d}.${m}`; filter(t.value); }};
  t.oninput = () => { let v=t.value.trim(); if(/^\d{0,2}\.?\d{0,2}$/.test(v)) filter(v.replace(/^(\d{1,2})\.(\d{1,2})$/,(_,d,m)=>`${d.padStart(2,'0')}.${m.padStart(2,'0')}`)); };
  c.onclick = () => { p.value=t.value=''; filter(''); btn.style.display=''; items.forEach((el,i)=>el.style.display=i<9?'':'none'); };

  // Сегодня в поиске
  const today = new Date();
  p.value = today.toISOString().slice(0,10);
  t.value = '02.11';
});
</script>
</body>
</html>